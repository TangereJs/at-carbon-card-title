<link rel="import" href="../tangere/tangere.html" />
<link rel="import" href="../at-theme/at-theme.html" />
<link rel="import" href="../at-core-style-classes/at-core-style-classes.html" />
<link rel="import" href="../at-carbon-menu-button/at-carbon-menu-button.html" />

<dom-module id="at-carbon-card-title">
  <template>
    <style include="at-core-style-classes"></style>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
      }

      .flex-container {
        @apply(--layout-horizontal);
      }

      .card-title {
        @apply(--layout-flex);
        @apply(--paper-font-caption);
        opacity: var(--at-secondary-opacity);
        line-height: 40px;
      }

      .menu-button {
        align-self: right;
      }
    </style>

    <div class="flex-container">
      <div class="card-title mlsm">[[title]]</div>
      <at-carbon-menu-button
        icon="now:more" 
        color="gray" 
        class="menu-button"
        items="[[items]]"
        value="[[value]]"
        on-value-changed="_onMenuValueChanged"
      ></at-carbon-menu-button>
    </div>
  </template>
</dom-module>
<script>
Polymer({
  is: "at-carbon-card-title",
  properties: {
    title: {
      type: String,
      value: ""
    },

    items: {
      type: Array,
      value: function() {
        return [];
      },
      schema: {
        items: {
          properties: {
            title: {
              type: String,
              title: "Title",
              "default": ""
            },
            value: {
              type: String,
              title: "Value",
              "default": ""
            },
            icon: {
              type: String,
              title: "Icon",
              "default": ""
            }
          }
        }
      },
      xgridcols: "12"
    },

    value: {
      type: String,
      value: ""
    }    
  },

  ready: function() {

  },

  _onMenuValueChanged: function(event) {
    this.fire('value-changed', { value: event.detail.value }, { bubbles: false });
  }
});
</script>
